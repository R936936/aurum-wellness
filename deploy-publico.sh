#!/bin/bash

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#  AURUM WELLNESS - DEPLOYMENT PรBLICO A VERCEL
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ                                                               โ"
echo "โ     ๐ AURUM WELLNESS - DEPLOYMENT PรBLICO ๐                โ"
echo "โ                                                               โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# Verificar que estamos en el directorio correcto
if [ ! -f "index.html" ] || [ ! -f "vercel.json" ]; then
    echo "โ Error: Este script debe ejecutarse desde el directorio aurum-wellness"
    exit 1
fi

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "  ๐ PASO 1: Verificar cambios"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
git status --short
echo ""

read -p "ยฟContinuar con el deployment? (S/n): " -n 1 -r
echo ""
if [[ ! $REPLY =~ ^[Ss]$ ]] && [[ ! -z $REPLY ]]; then
    echo "โ Deployment cancelado"
    exit 0
fi

echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "  ๐ฆ PASO 2: Commit de cambios"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

git add .
git commit -m "feat: aumentar tamaรฑos fuente para legibilidad adultos + preparar deployment pรบblico"

if [ $? -ne 0 ]; then
    echo "โ๏ธ  No hay cambios para commitear o commit fallรณ"
fi

echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "  ๐ PASO 3: Push a GitHub (Auto-deploy en Vercel)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

git push origin main

if [ $? -eq 0 ]; then
    echo ""
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo "  โ DEPLOYMENT INICIADO EN VERCEL"
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo ""
    echo "๐ Tu cรณdigo fue enviado a GitHub"
    echo "โก Vercel detectarรก el cambio automรกticamente"
    echo "โฑ๏ธ  Tiempo estimado de deployment: 2-3 minutos"
    echo ""
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo "  ๐ VERIFICAR DEPLOYMENT"
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo ""
    echo "Opciรณn 1: Dashboard de Vercel"
    echo "  โ https://vercel.com/dashboard"
    echo ""
    echo "Opciรณn 2: Usando Vercel CLI"
    echo "  โ vercel --prod"
    echo ""
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo "  ๐ฑ COMPARTIR CON USUARIOS"
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo ""
    echo "Tu URL pรบblica serรก algo como:"
    echo ""
    echo "  ๐ https://aurum-wellness.vercel.app"
    echo ""
    echo "โ Acceso directo - SIN necesidad de cuenta Vercel"
    echo "โ Funciona en desktop, mobile, tablet"
    echo "โ Trinity System con Claude + Gemini + OpenAI"
    echo "โ UI optimizada para adultos (fuentes grandes)"
    echo ""
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo "  ๐ก PRรXIMO PASO"
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo ""
    echo "Espera 2-3 minutos y luego:"
    echo ""
    echo "1. Verifica que el deployment fue exitoso en Vercel dashboard"
    echo "2. Abre la URL pรบblica en tu navegador"
    echo "3. Prueba con algunos usuarios"
    echo "4. Cuando estรฉs listo para historial vitalicio:"
    echo "   โ Di: 'ACTIVAR FIREBASE AUTH Y HISTORIAL'"
    echo ""
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo ""
    echo "โจ ยกDeployment pรบblico iniciado exitosamente! โจ"
    echo ""
else
    echo ""
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo "  โ ERROR EN DEPLOYMENT"
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo ""
    echo "El push a GitHub fallรณ. Posibles causas:"
    echo ""
    echo "1. No estรกs autenticado con GitHub"
    echo "   โ Ejecuta: gh auth login"
    echo ""
    echo "2. No tienes permisos en el repositorio"
    echo "   โ Verifica en: https://github.com/R936936/aurum-wellness"
    echo ""
    echo "3. Problemas de red"
    echo "   โ Verifica tu conexiรณn a internet"
    echo ""
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo ""
    exit 1
fi
